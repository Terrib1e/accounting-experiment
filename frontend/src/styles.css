@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
@import '@angular/material/prebuilt-themes/indigo-pink.css';
@import url('https://fonts.googleapis.com/icon?family=Material+Icons');

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  body {
    @apply antialiased text-slate-900 bg-[#f8fafc] selection:bg-primary-100 selection:text-primary-900;
  }

  h1, h2, h3, h4, h5, h6 {
    @apply font-bold tracking-tight text-slate-900;
  }
}

/* ============================================
   Glassmorphism System
   ============================================ */
.glass-panel {
  @apply bg-white/70 backdrop-blur-glass border border-white/40 shadow-glass;
}

.glass-dark {
  @apply bg-slate-900/90 backdrop-blur-glass border-r border-white/5 shadow-glass;
}

.glass-button {
  @apply bg-white/10 hover:bg-white/20 backdrop-blur-sm border border-white/20 transition-all duration-200;
}

/* ============================================
   Enhanced Cards
   ============================================ */
.premium-card {
  @apply bg-white rounded-2xl border border-slate-200/60 shadow-card transition-all duration-300;
}

.premium-card:hover {
  @apply shadow-card-hover -translate-y-1 border-primary-200/50;
}

/* ============================================
   Refined Status Badges
   ============================================ */
.status-badge {
  @apply inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-bold uppercase tracking-wider space-x-1;
}

.status-badge.posted { @apply bg-accent-100 text-accent-700; }
.status-badge.approved { @apply bg-primary-100 text-primary-700; }
.status-badge.draft { @apply bg-slate-100 text-slate-600; }
.status-badge.void { @apply bg-red-100 text-red-700; }

/* ============================================
   Premium Tables
   ============================================ */
.table-container {
  @apply overflow-hidden rounded-2xl border border-slate-200/60 bg-white shadow-premium;
}

.table-premium {
  @apply w-full text-left border-collapse;
}

.table-premium thead th {
  @apply px-6 py-4 text-[11px] font-bold text-slate-400 uppercase tracking-widest bg-slate-50/50 border-b border-slate-100/60;
}

.table-premium tbody tr {
  @apply transition-colors duration-200 border-b border-slate-50 last:border-0;
}

.table-premium tbody tr:hover {
  @apply bg-slate-50/80;
}

.table-premium tbody td {
  @apply px-6 py-4 text-sm text-slate-600;
}

/* ============================================
   Input Styling
   ============================================ */
.form-input-premium {
  @apply w-full px-4 py-2.5 rounded-xl border border-slate-200 bg-slate-50/30 text-slate-900;
  @apply transition-all duration-200 placeholder-slate-400 font-medium;
  @apply focus:outline-none focus:ring-4 focus:ring-primary-500/10 focus:border-primary-500 focus:bg-white;
}

/* ============================================
   Button Styling
   ============================================ */
.btn-primary {
  @apply px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white rounded-xl font-semibold shadow-lg shadow-primary-500/30 transition-all duration-200 hover:shadow-primary-500/50 active:scale-95;
}

.btn-secondary {
    @apply px-4 py-2 bg-white hover:bg-slate-50 text-slate-700 border border-slate-200 rounded-xl font-semibold shadow-sm transition-all duration-200 hover:border-slate-300 active:scale-95;
}

/* ============================================
   Animations
   ============================================ */
/* Animations are defined in tailwind.config.js */

/* ============================================
   Angular Material Overrides (Modals)
   ============================================ */
.mat-mdc-dialog-container {
  --mdc-dialog-container-color: #ffffff !important;
  --mdc-dialog-container-elevation: none !important;
  padding: 0 !important;
  border-radius: 1.25rem !important; /* rounded-2xl */
  overflow: hidden !important;
  background-color: #ffffff !important;
}

.mat-mdc-dialog-surface {
  background-color: #ffffff !important;
  box-shadow: none !important;
  display: flex !important;
  flex-direction: column !important;
  @apply border border-slate-200/60 shadow-2xl shadow-slate-900/20 rounded-2xl overflow-hidden;
}

.cdk-overlay-dark-backdrop {
  background: rgba(15, 23, 42, 0.45) !important;
  -webkit-backdrop-filter: blur(8px);
  backdrop-filter: blur(8px);
  opacity: 1 !important;
}

/* Header/Title */
[mat-dialog-title] {
  @apply m-0 px-8 py-5 text-xl font-bold text-slate-900 border-b border-slate-100 bg-white sticky top-0 z-10 !important;
  @apply flex items-center justify-between;
  font-family: 'Inter', sans-serif !important;
}

/* Content Area */
.mat-mdc-dialog-content {
  max-height: 85vh !important;
  @apply p-8 !important;
  @apply text-slate-600;
  overflow-y: auto !important;
  flex: 1 1 auto;
}

/* Actions Footer */
.mat-mdc-dialog-actions {
  @apply px-8 py-5 border-t border-slate-100 bg-slate-50/50 !important;
  gap: 0.75rem;
  justify-content: flex-end !important;
  flex: 0 0 auto;
}

.mat-mdc-icon-button {
  @apply w-10 h-10 flex items-center justify-center p-0 !important;
}

.mat-mdc-icon-button mat-icon {
  @apply !flex items-center justify-center !w-5 !h-5 !text-[20px] !leading-[20px] !m-0 !p-0 !static !bg-transparent;
}

/* Standardized Premium Dialog Class */
.premium-dialog .mat-mdc-dialog-container {
    --mdc-dialog-container-color: #ffffff !important;
}

.premium-dialog .mat-mdc-dialog-surface {
    @apply rounded-3xl overflow-hidden border border-slate-200/60 shadow-2xl !important;
}

/* Material Form Field Polishing */
.premium-dialog .mat-mdc-form-field {
    @apply w-full mb-1 !important;
}

/*
   FIX: Vertical artifacts in Material Outline
   Standard Material Notch has segments. Overriding borders often creates double lines.
*/
.premium-dialog .mdc-notched-outline__leading,
.premium-dialog .mdc-notched-outline__notch,
.premium-dialog .mdc-notched-outline__trailing {
    @apply border-slate-200 transition-colors duration-200 !important;
    border-top-width: 1px !important;
    border-bottom-width: 1px !important;
}

.premium-dialog .mdc-notched-outline__leading {
    border-left-width: 1px !important;
    border-right-width: 0 !important;
}

.premium-dialog .mdc-notched-outline__notch {
    border-left-width: 0 !important;
    border-right-width: 0 !important;
}

.premium-dialog .mdc-notched-outline__trailing {
    border-right-width: 1px !important;
    border-left-width: 0 !important;
}

/* Focused States */
.premium-dialog .mat-focused .mdc-notched-outline__leading,
.premium-dialog .mat-focused .mdc-notched-outline__notch,
.premium-dialog .mat-focused .mdc-notched-outline__trailing {
    @apply border-primary-500 !important;
    border-top-width: 1.5px !important;
    border-bottom-width: 1.5px !important;
}

.premium-dialog .mat-focused .mdc-notched-outline__leading {
    border-left-width: 1.5px !important;
}

.premium-dialog .mat-focused .mdc-notched-outline__trailing {
    border-right-width: 1.5px !important;
}

/* Label Refinement */
.premium-dialog .mat-mdc-form-field-label {
    @apply text-slate-500 font-medium !important;
}

.premium-dialog .mat-focused .mat-mdc-form-field-label {
    @apply text-primary-600 font-semibold !important;
}

/* Subscript Hide (Cleaner Look) */
.premium-dialog .mat-mdc-form-field-subscript-wrapper {
    @apply hidden !important;
}

.premium-dialog .mat-mdc-form-field-error-wrapper,
.premium-dialog .mat-mdc-form-field-hint-wrapper {
    @apply block !important;
}

/* Scrollbar Refinement */
.mat-mdc-dialog-content::-webkit-scrollbar {
  width: 5px;
}

.mat-mdc-dialog-content::-webkit-scrollbar-track {
  @apply bg-transparent;
}

.mat-mdc-dialog-content::-webkit-scrollbar-thumb {
  @apply bg-slate-200 rounded-full hover:bg-slate-300 transition-colors;
}

/* Datepicker & Select Popups */
.mat-mdc-select-panel, .mat-datepicker-content {
    @apply shadow-2xl border border-slate-200/60 rounded-xl overflow-hidden !important;
    background-color: white !important;
}

.mat-mdc-option {
    @apply py-3 px-4 text-sm transition-colors duration-150 !important;
    min-height: 44px !important;
}

.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled) {
    @apply bg-primary-50 !important;
}

.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled) .mdc-list-item__primary-text {
    @apply text-primary-700 font-semibold !important;
}

/* Scrollbar Refinement */
::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

::-webkit-scrollbar-track {
  @apply bg-transparent;
}

::-webkit-scrollbar-thumb {
  @apply bg-slate-200 rounded-full hover:bg-slate-300 transition-colors;
}

/* ============================================
   Fix for Overlays Within Dialogs (Datepicker, Dropdowns)
   ============================================ */

/*
 * Z-INDEX HIERARCHY (AGGRESSIVE):
 * - Dialog backdrop: 9999
 * - Dialog wrapper: 10000
 * - Datepicker/Select bounding boxes: 11000+ (MUST be above dialog)
 *
 * Angular Material sets inline styles, so we need very high specificity.
 */

/* CRITICAL: The connected position bounding box (wraps datepicker/select popups) */
/* Using attribute selector for higher specificity to override Material's inline styles */
div.cdk-overlay-connected-position-bounding-box[dir] {
    z-index: 11000 !important;
}

.cdk-overlay-connected-position-bounding-box {
    z-index: 11000 !important;
    position: fixed !important;
}

/* Overlay container - needs to be high */
.cdk-overlay-container {
    z-index: 10500 !important;
}

/* The overlay pane inside bounding boxes (for datepicker/select) */
.cdk-overlay-connected-position-bounding-box .cdk-overlay-pane {
    z-index: 11001 !important;
}

/* Dialog wrapper stays at base level */
.cdk-global-overlay-wrapper {
    z-index: 10000 !important;
}

/* Dialog backdrop stays lower */
.cdk-overlay-backdrop.cdk-overlay-dark-backdrop {
    z-index: 9999 !important;
}

/* Datepicker content - ensure it's visible and above dialog */
.mat-datepicker-content {
    z-index: 11002 !important;
    position: relative !important;
}

/* mat-datepicker-popup class if present */
.mat-datepicker-popup {
    z-index: 11002 !important;
}

/* Native select panels (handled by browser, but parent must not clip) */
.mat-mdc-dialog-container,
.mat-mdc-dialog-surface,
.mat-mdc-dialog-content,
mat-dialog-content {
    overflow: visible !important;
}

/* mat-select panel visibility */
.mat-mdc-select-panel {
    z-index: 11002 !important;
    min-width: 200px !important;
    max-width: 90vw !important;
    visibility: visible !important;
    opacity: 1 !important;
    display: block !important;
}

/* Ensure mat-option items are visible */
.mat-mdc-option {
    display: flex !important;
    visibility: visible !important;
}

/* Transparent backdrop should not block clicks */
.cdk-overlay-backdrop.cdk-overlay-transparent-backdrop {
    background: transparent !important;
    pointer-events: none !important;
    z-index: 10999 !important;
}
